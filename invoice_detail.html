<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Hóa Đơn Thanh Toán</title>
  <style>
    body {
      font-family: 'Times New Roman', Times, serif, sans-serif;
      margin: 40px;
      background-color: #f8f8f8;
    }
    .invoice {
      background: #fff;
      padding: 30px;
      max-width: 800px;
      margin: auto;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1, h2 {
      text-align: center;
    }
    h3 {
      text-align: center;
      font-weight: normal;
      margin-bottom: 20px;
    }
    .info {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    .info-section {
      flex: 1;
      padding: 0 10px;
    }
    .info-section-title {
      font-weight: bold;
      margin-bottom: 5px;
      border-bottom: 1px solid #ddd;
      padding-bottom: 5px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    table th, table td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }
    table th {
      background-color: #f0f0f0;
    }
    .total {
      width: 350px;              
      margin-left: auto;         
      margin-right: 0;           
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }
    .total-row {
      display: flex;
      gap: 20px;
    }
    .total-label, .total-value {
      text-align: left;
      font-weight: normal;
    }
    .total-label {
      width: 150px;
    }
    .total-value {
      width: 200px;
      font-weight: bold;
    }
    .signature {
      display: flex;
      justify-content: space-between;
      margin-top: 40px;
    }
    .signature div {
      text-align: center;
      width: 30%;
    }
    .signature-line {
      border-top: 1px solid #000;
      width: 80%;
      margin: 0 auto;
      padding-top: 5px;
    }
    .print-btn {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    .print-btn:hover {
      background-color: #45a049;
    }
    .time-slot {
      background-color: #f9f9f9;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 15px;
    }
    .time-slot-title {
      font-weight: bold;
      margin-bottom: 5px;
    }
  </style>
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
  const data = {
    "id": "ce519d00-000f-4191-b593-0896cb358488",
    "appointmentId": "08bd22aa-89aa-47d3-a9f1-432b7de8ba01",
    "total": 1000000,
    "status": "Chưa thanh toán",
    "note": "ads",
    "createdAt": "01/05/2025 00:01:31",
    "updatedAt": "01/05/2025 00:01:31",
    "appointment": {
      "id": "08bd22aa-89aa-47d3-a9f1-432b7de8ba01",
      "date": "20/04/2025",
      "status": "Đã khám xong"
    },
    "service": {
      "id": "c64a6d79-a62d-4602-9719-203524b95d08",
      "name": "Khám bệnh",
      "price": 500000
    },
    "patient": {
      "id": "401c33b4-02b7-4a77-b685-a9b687458557",
      "userName": "Nguyễn Thị Liên",
      "email": "nguyenchi13628003@gmail.com",
      "phone": "01234567899"
    },
    "timeSlot": {
      "id": "221c469c-d450-4bbe-92b1-14d11c05b656",
      "startDate": "09/04/2025 10:00:00",
      "endDate": "09/04/2025 10:30:00",
      "status": null
    },
    "doctor": {
      "id": "35cdcb73-65d7-42fb-a681-fe78a67ed32a",
      "userName": "Doctor",
      "email": "doctor@example.com",
      "phone": "0987654321",
      "address": "Hà Nội"
    }
  };
  document.addEventListener('DOMContentLoaded', () => {
    updateInvoiceUI(data);
  });
 
</script>
<body>
  <div class="invoice">
    <h2>Bệnh viện đa khoa YOUMED</h2>
    <h3>Số 1 Văn Quán, Hà Đông, Hà Nội<br>Hotline: 0988.988.988</h3>
    
    <div style="text-align: right; margin-bottom: 20px;">
      <p><strong>Mã hóa đơn:</strong> <span id="invoice-id">HD123456</span></p>
      <p><strong>Ngày lập:</strong> <span id="invoice-date">24/04/2025 15:45:12</span></p>
    </div>
    
    <h1>HÓA ĐƠN THANH TOÁN DỊCH VỤ Y TẾ</h1>
    
    <div class="info">
      <div class="info-section">
        <div class="info-section-title">THÔNG TIN BỆNH NHÂN</div>
        <p><strong>Họ tên:</strong> <span id="patient-name">Nguyễn Văn A</span></p>
        <p><strong>Mã:</strong> <span id="patient-id">PT123</span></p>
        <p><strong>Điện thoại:</strong> <span id="patient-phone">0123 456 789</span></p>
      </div>
      
      <div class="info-section">
        <div class="info-section-title">THÔNG TIN BÁC SĨ</div>
        <p><strong>Bác sĩ:</strong> <span id="doctor-name">BS. Trần Văn B</span></p>
        <p><strong>Số Điện thoại:</strong> <span id="doctor-phone">0987 654 321</span></p>
      </div>
    </div>
    
    <div class="info">
      <div class="info-section">
        <div class="info-section-title">THÔNG TIN CUỘC HẸN</div>
        <p><strong>Ngày khám:</strong> <span id="appointment-date">24/04/2025</span></p>
        <p><strong>Trạng thái:</strong> <span id="appointment-status">Hoàn thành</span></p>
      </div>
      
      <div class="info-section">
        <div class="info-section-title">THÔNG TIN CA KHÁM</div>
        <div class="time-slot">
          <div class="time-slot-title">Khung giờ đặt hẹn:</div>
          <p id="time-slot">08:00 - 08:30 ngày 24/04/2025</p>
        </div>
      </div>
    </div>
    
    <table id="service-table">
      <tr>
        <th>STT</th>
        <th>Tên dịch vụ</th>
        <th>Số lượng</th>
        <th>Đơn giá (VNĐ)</th>
        <th>Thành tiền (VNĐ)</th>
      </tr>

    </table>
    
    <div class="total">
      <div class="total-row">
        <div class="total-label">Tổng tiền dịch vụ:</div>
        <div class="total-value"><span id="total-amount">350.000</span> VNĐ</div>
      </div>
      <div class="total-row">
        <div class="total-label">Đã thanh toán:</div>
        <div class="total-value"><span id="paid-amount">350.000</span> VNĐ</div>
      </div>
      <div class="total-row">
        <div class="total-label">Còn lại:</div>
        <div class="total-value"><span id="remaining-amount">0</span> VNĐ</div>
      </div>
      <div class="total-row">
        <div class="total-label">Trạng thái hóa đơn:</div>
        <div class="total-value"><span id="invoice-status">Đã thanh toán</span></div>
      </div>
    </div>
    
    <div style="margin-top: 20px; text-align: left;">
      <strong>Ghi chú:</strong> <span id="invoice-note">Thanh toán đầy đủ</span>
    </div>
    
    <div class="signature">
      <div>
        <p>NGƯỜI LẬP HÓA ĐƠN</p>
        <p>(Ký, ghi rõ họ tên)</p>
        <div class="signature-line"></div>
      </div>
      <div></div>
      <div>
        <p>KHÁCH HÀNG</p>
        <p>(Ký, ghi rõ họ tên)</p>
        <div class="signature-line"></div>
      </div>
    </div>
    
    <div style="text-align: center; margin-top: 30px; font-style: italic;">
      <p>Cảm ơn quý khách đã sử dụng dịch vụ của chúng tôi!</p>
      <p>Mọi thắc mắc vui lòng liên hệ hotline: 0988.988.988</p>
    </div>
  </div>
  
  <button class="print-btn" onclick="downloadPDF()">Xuất PDF</button>
  <script src="invoice_detail.js"></script>
</body>
</html>